var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;e<=99||(e=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<e)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var icatessay={diffDate:function(e,t=!1){const n=new Date,a=new Date(e),l=n.getTime()-a.getTime(),o=36e5,c=24*o,s=30*c;let r;const i=GLOBAL_CONFIG.date_suffix||{},m=i.day||"天前",u=i.hour||"小时前",d=i.hour||"分钟前";if(t){const e=l/c,t=l/o,n=l/6e4;r=l/s>=1?a.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+m:t>=1?parseInt(t)+" "+u:n>=1?parseInt(n)+" "+d:i.just}else r=parseInt(l/c);return r},changeTimeInEssay:function(){document.querySelector("#icat-bber")&&document.querySelectorAll("#icat-bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=icatessay.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){n.initEvent("input",!0,!0);var a=replaceAll(e,"\n","\n> ");t.value="> "+a+"\n\n",t.dispatchEvent(n);var l=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,l-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}};icatessay.changeTimeInEssay(),icatessay.reflashEssayWaterFall();